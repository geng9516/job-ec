<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="con.chin.mapper.ItemMapper">

    <!--    新产品登录-->
    <insert id="saveItem">

        insert into t_item (sitename,
                            shopname,
                            itemcode,
                            olditemcode,
                            itempath,
                            itemcategorycode,
                            itemname,
                            price,
                            option1,
                            value1,
                            option2,
                            value2,
                            option3,
                            value3,
                            option4,
                            value4,
                            option5,
                            value5,
                            url5,
                            headline,
                            caption,
                            explanation,
                            image,
                            flog,
                            created,
                            updatetime,
                            enddata)
        values (#{siteName},
                #{shopName},
                #{itemCode},
                #{oldItemCode},
                #{itemPath},
                #{itemCategoryCode},
                #{itemName},
                #{price},
                #{option1},
                #{value1},
                #{option2},
                #{value2},
                #{option3},
                #{value3},
                #{option4},
                #{value4},
                #{option5},
                #{value5},
                #{url5},
                #{headline},
                #{caption},
                #{explanation},
                #{image},
                #{flog},
                #{created},
                #{updatetime},
                #{endData})

    </insert>

    <!--    产品更新-->
    <update id="updateItem">

        update t_item
        set sitename=#{siteName},
            shopname=#{shopName},
            itempath=#{itemPath},
            itemcategorycode=#{itemCategoryCode},
            itemname=#{itemName},
            price=#{price},
            option1=#{option1},
            option1=#{option1},
            value1=#{value1},
            option2=#{option2},
            value2=#{value2},
            option3=#{option3},
            value3=#{value3},
            option4=#{option4},
            value4=#{value4},
            option5=#{option5},
            value5=#{value5},
            headline=#{headline},
            url5=#{url5},
            explanation=#{explanation},
            image=#{image},
            updatetime=#{updatetime},
            flog=#{flog}
        where oldItemCode = #{oldItemCode}

    </update>

    <!--    检索所以产品-->
    <select id="findAllItem" resultType="con.chin.pojo.Item">

        select *
        from t_item

    </select>


    <!--    旧产品code检索-->
    <select id="findItem" resultType="con.chin.pojo.Item">

        select *
        from t_item
        where olditemcode = #{oldItemCode}

    </select>

    <!--    产品id,产品path,产品名,店铺名模糊查询-->
    <select id="findItemBySearchConditions" resultType="con.chin.pojo.Item">

        select *
        from t_item
        <where>
            <if test="searchConditions != null and searchConditions != ''">
                or itemcode like concat('%',#{searchConditions},'%')
            </if>
            <if test="searchConditions != null and searchConditions != ''">
                or itempath like '%' #{searchConditions} '%'
            </if>
            <if test="searchConditions != null and searchConditions != ''">
                or itemname like concat('%',#{searchConditions},'%')
            </if>
            <if test="searchConditions != null and searchConditions != ''">
                or shopname like concat('%',#{searchConditions},'%')
            </if>
            <if test="searchConditions != null and searchConditions != ''">
                or olditemcode like concat('%',#{searchConditions},'%')
            </if>

        </where>

        order by updatetime desc

    </select>

<!--    SiteShop查询-->
    <select id="findItemBySiteShop" resultType="con.chin.pojo.Item">

        select *
        from t_item
        <where>

            <if test="searchConditions != null and searchConditions != ''">
                and shopname like concat('%',#{searchConditions},'%')
            </if>

        </where>

        order by updatetime desc

    </select>

    <!--    获取产品code-->
    <select id="findItemCodeByPath" resultType="string">

        select itemcode
        from t_item
        where itempath = #{path}

    </select>


</mapper>































